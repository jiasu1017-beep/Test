# 手动发布工作流程指南

## ⚠️ 重要声明

**本项目已禁用所有自动化发布功能。**

- ❌ 无自动发布循环
- ❌ 无定时发布任务
- ❌ 无自动部署
- ✅ 仅支持手动发布流程

---

## 🔒 发布权限控制

所有发布操作必须满足以下条件：

1. **明确用户发起** - 发布只能由用户直接手动触发
2. **完整审批流程** - 每个发布步骤需要明确确认
3. **版本号明确指定** - 必须明确指定要发布的版本号
4. **发布内容审核** - 发布前必须审核变更内容

---

## 📋 手动发布流程

### 阶段一：准备发布

1. **确认发布需求**
   - 验证功能完整性
   - 确认所有Bug已修复
   - 检查代码质量

2. **确定版本号**
   - 遵循语义化版本规范 (MAJOR.MINOR.PATCH)
   - 记录版本变更内容

3. **更新文档**
   - 更新 README.md 中的版本历史
   - 更新变更日志
   - 准备发布报告

### 阶段二：代码冻结与测试

1. **代码冻结**
   - 停止向发布分支合并新功能
   - 仅允许紧急Bug修复

2. **完整测试**
   - 执行完整功能测试
   - 性能测试
   - 兼容性测试

### 阶段三：执行发布（手动）

#### 步骤 1：更新版本信息

```bash
# 1. 更新相关文档中的版本号
# 2. 更新项目配置文件（如需要）
```

#### 步骤 2：构建发布版本

```bash
cd f:\00AI\Test\build
D:\Qt\5.15.2\mingw81_64\bin\qmake.exe ..\PonyWork.pro
D:\Qt\Tools\mingw810_64\bin\mingw32-make.exe clean
D:\Qt\Tools\mingw810_64\bin\mingw32-make.exe
```

#### 步骤 3：创建发布目录

```bash
# 创建版本目录（例如：release-v1.0.0）
mkdir f:\00AI\Test\release-vX.X.X
```

#### 步骤 4：打包发布

```bash
# 复制可执行文件
copy f:\00AI\Test\build\release\PonyWork.exe f:\00AI\Test\release-vX.X.X\

# 使用 windeployqt 部署依赖
D:\Qt\5.15.2\mingw81_64\bin\windeployqt.exe f:\00AI\Test\release-vX.X.X\PonyWork.exe

# 复制文档
copy f:\00AI\Test\README.txt f:\00AI\Test\release-vX.X.X\
```

#### 步骤 5：发布验证

```bash
# 1. 测试发布包是否可以独立运行
# 2. 验证所有功能正常
# 3. 检查依赖完整性
```

### 阶段四：发布确认

在完成所有发布步骤后，必须填写以下确认清单：

- [ ] 发布版本号已明确指定
- [ ] 代码已完整测试通过
- [ ] 发布包已创建并验证
- [ ] 文档已更新
- [ ] 发布操作已明确记录
- [ ] 用户已明确授权此次发布

---

## 📝 发布记录模板

每次发布必须记录以下信息：

```
发布日期：YYYY-MM-DD
版本号：vX.X.X
发布人：[发布者姓名]
授权人：[授权人姓名]
变更内容：
- [变更1]
- [变更2]
测试状态：✅ 通过 / ❌ 失败
发布状态：✅ 成功 / ❌ 失败
备注：
```

---

## 🔐 安全措施

1. **发布权限** - 仅授权人员可执行发布
2. **操作日志** - 所有发布操作必须记录
3. **回滚预案** - 每次发布前准备回滚方案
4. **发布审核** - 重要发布需要多人审核

---

## 🛡️ 自动化禁用确认

本项目已确认：

- [ ] 无 GitHub Actions 工作流
- [ ] 无 GitLab CI 配置
- [ ] 无 Jenkins 任务
- [ ] 无定时任务脚本
- [ ] 无自动部署配置
- [ ] 无 Webhook 触发机制
- [ ] 无自动版本递增

所有发布操作完全手动控制！

---

**最后更新：2026-02-10**
